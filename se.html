<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Search - Futurista</title>
<style>
body {
  margin:0; padding:20px; font-family:Arial, sans-serif; 
  background:#0a0a0a; color:#fff; overflow-x:hidden;
}
h1 {
  text-align:center; color:#ff0055;
  text-shadow:0 0 10px #ff0055,0 0 20px #ff77aa;
  animation: neonPulse 1.5s infinite alternate;
}
input, .search-btn {
  display:inline-block; margin:10px auto; padding:10px; border-radius:5px; 
  border:none; outline:none; font-size:16px;
}
input { width:300px; }
.search-btn { background:#ff0055; color:#fff; font-weight:bold; cursor:pointer; transition:0.2s; }
.search-btn:hover { background:#cc0044; }

/* Estilo tarjetas */
.videos-container {
  display:flex; flex-wrap:wrap; justify-content:center; gap:20px; margin-top:20px;
}
.video-card {
  background:linear-gradient(145deg,#1b1b1b,#111); 
  border-radius:15px; width:260px; 
  text-align:center; 
  box-shadow:0 0 15px rgba(255,0,85,0.3);
  transition:transform 0.3s, box-shadow 0.3s;
}
.video-card:hover {
  transform:translateY(-5px) scale(1.03);
  box-shadow:0 0 20px rgba(255,0,85,0.7);
}
.video-card img { 
  width:100%; height:150px; object-fit:cover; 
  border-radius:10px 10px 0 0; 
}
.video-card h3 { 
  font-size:16px; margin:5px 0; 
  color:#ff77aa; text-shadow:0 0 5px #ff77aa; 
}
.video-card p { font-size:12px; margin:2px 0; }
.video-card button {
  width:90%; padding:8px; margin:5px 0; border:none; 
  background:#ff0055; color:#fff; font-weight:bold; 
  border-radius:5px; cursor:pointer; 
  text-shadow:0 0 3px #ff77aa; transition:0.2s;
}
.video-card button:hover { background:#cc0044; transform:scale(1.05); }

/* Reproductor audio fijo */
#audioPlayerContainer {
  position:fixed; bottom:0; left:0; width:100%; 
  background:#111; border-top:2px solid #ff0055;
  padding:10px; display:flex; align-items:center; justify-content:center;
}
#audioPlayer { width:90%; }
footer { margin-top:40px; text-align:center; font-size:14px; color:#888; }

/* Animaciones */
@keyframes neonPulse {
  0%{text-shadow:0 0 5px #ff77aa,0 0 10px #ff0055;} 
  100%{text-shadow:0 0 20px #ff77aa,0 0 40px #ff0055;}
}
</style>
</head>
<body>

<h1>Buscador YouTube Futurista</h1>
<input type="text" id="query" placeholder="Escribe tu bÃºsqueda...">
<button class="search-btn" onclick="buscar()">Buscar</button>

<div class="videos-container" id="videos"></div>

<!-- Reproductor de audio -->
<div id="audioPlayerContainer">
  <audio id="audioPlayer" controls></audio>
</div>

<footer>
  API utilizada: <a href="https://delirius-apiofc.vercel.app" target="_blank" style="color:#ff0055;">Delirius API</a> | Desarrollado por Black Clover
</footer>

<script>
async function buscar(){
  const query=document.getElementById('query').value;
  if(!query) return alert("Escribe algo para buscar");
  const container=document.getElementById('videos');
  container.innerHTML='Cargando...';

  try{
    const res=await fetch(`https://delirius-apiofc.vercel.app/search/ytsearch?q=${encodeURIComponent(query)}`);
    const data=await res.json();
    if(!data.status || !data.data.length){ container.innerHTML='No se encontraron resultados'; return; }

    container.innerHTML='';
    const videos=data.data.slice(0,8);
    videos.forEach(video=>{
      const card=document.createElement('div');
      card.className='video-card';
      card.innerHTML=`
        <img src="${video.thumbnail}" alt="${video.title}">
        <h3>${video.title}</h3>
        <p><strong>Autor:</strong> <a href="${video.author.url}" target="_blank" style="color:#ff77aa;">${video.author.name}</a></p>
        <p><strong>DuraciÃ³n:</strong> ${video.duration}</p>
        <button onclick="reproducirVideo('${video.videoId}')">ðŸŽ¬ Ver Video</button>
        <button onclick="escucharAudio('${video.url}')">ðŸŽµ Escuchar Audio</button>
        <button onclick="copiarLink('${video.url}')">ðŸ“‹ Copiar Link</button>
      `;
      container.appendChild(card);
    });

  }catch(err){ container.innerHTML='Error al buscar videos'; console.error(err); }
}

function copiarLink(url){ navigator.clipboard.writeText(url).then(()=>alert('Link copiado al portapapeles')).catch(()=>alert('Error al copiar')); }

function reproducirVideo(videoId){
  window.open(`https://www.youtube.com/watch?v=${videoId}`,'_blank');
}

async function escucharAudio(url){
  try{
    // aquÃ­ se puede usar un endpoint de tu API que convierta a mp3
    const res=await fetch(`https://delirius-apiofc.vercel.app/download/ytmp3?url=${encodeURIComponent(url)}`);
    const data=await res.json();
    if(data.status && data.result?.download_url){
      const audio=document.getElementById('audioPlayer');
      audio.src=data.result.download_url;
      audio.play();
    }else{
      alert("No se pudo obtener el audio");
    }
  }catch(err){ console.error(err); alert("Error al reproducir audio"); }
}
</script>

</body>
</html>